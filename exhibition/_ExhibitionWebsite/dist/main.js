!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=0)}([function(t,e,n){n(1),t.exports=n(2)},function(t,e,n){},function(t,e){var n=function(t,e,n,i){var o,r,a,c,s=(o=e||t,a=(r=n||t)[0]-o[0],c=r[1]-o[1],{length:Math.sqrt(Math.pow(a,2)+Math.pow(c,2)),angle:Math.atan2(c,a)}),f=s.angle+(i?Math.PI:0),u=.25*s.length;return[t[0]+Math.cos(f)*u,t[1]+Math.sin(f)*u]},i=function(t){var e=t.reduce(function(t,e,i,o){return 0===i?"M ".concat(e[0],",").concat(e[1]):"".concat(t," ").concat(function(t,e,i){var o=n(i[e-1],i[e-2],t),r=n(t,i[e-1],i[e+1],!0);return"C ".concat(o[0],",").concat(o[1]," ").concat(r[0],",").concat(r[1]," ").concat(t[0],",").concat(t[1])}(e,i,o))},"");return'<path d="'.concat(e,'" fill="none" />')};function o(){var t=$(".width-dynamic").textWidth();$(".width-dynamic").css({width:t})}$.fn.textWidth=function(t,e){return $.fn.textWidth.fakeEl||($.fn.textWidth.fakeEl=$("<span>").hide().addClass("fakeEl").appendTo(document.body)),$.fn.textWidth.fakeEl.text(t||this.val().replace(/[ \t]+$/g,".")||this.text()||this.attr("placeholder")).css("font",e||this.css("font")),$.fn.textWidth.fakeEl.width()},$(".width-dynamic").on("input",o).trigger("input"),$(document).ready(function(){o()});$(".width-dynamic");!function(t,e,n){$(this)}();var r,a,c,s,f,u="https://en.wikipedia.org/w/api.php?action=query&origin=*&list=search&utf8=&format=json&srlimit=500&srsearch=",l="https://en.wikipedia.org/w/api.php?action=parse&origin=*&format=json&prop=text&page=",d=document.querySelector("#round-svg"),h=document.querySelector("#title"),p=document.querySelector("#link"),m=(document.querySelector("#resultDiv"),document.querySelector("#userinput")),v=[new Date("1990"),new Date("1990")],g=3,y=new Date,w=12,b=15e3,x=!1,k=!1,S=!0,T=!0,j=.8,M=.65,O=[];function q(){T?(r=m.value)&&("muchete make a card please"==r||"ba print"==r?(m.value=a,r=a,console.log("manual Print!"),x=!0,N()):"final presentation"==r&&S?(k=!0,S=!1,C(r)):C(r),a=r):($("#title").add("#title .term").addClass("warn"),setTimeout(function(){$("#title").add("#title .term").removeClass("warn")},500))}function C(t){T=!1,A(),D(!0),F(),function(t){var e=u+t;$.ajax({url:e,dataType:"json"}).done(_).fail(function(){P("Search Failed. Sorry!")})}(t)}function D(t){$("#resultDiv").fadeOut("fast",function(){t&&$(this).empty()})}function I(t,e){h.innerText=t,$("#title").fadeIn("fast",e)}function A(t){$("#title").fadeOut("fast",t)}function P(t){I(t),p.href="#",T=!0}function _(t){if(t.query.search.length){var e=t.query.search.length-1-Math.floor((n=M,i=j,(Math.random()*(+i-+n)+ +n)*t.query.search.length));c=t.query.search[e].title,t.query.search[0].title,k&&(c="National Thanksgiving Turkey Presentation",k=!1),s=c,I(c,function(){var t;c=c.replace(/\s+/g,"_"),p.href="https://en.wikipedia.org/wiki/"+c,t={title:c,cardTitle:s,term:r,home:!1},window.history.pushState(t,"");var e=l+c;$.ajax({url:e,dataType:"json"}).done(W).fail(function(){P("Couldn't load article. Sorry!")})})}else P("No results. Sorry!");var n,i}function W(t){try{var e=t.parse.text["*"];$("#resultDiv").html(e).promise().done(E)}catch(t){P("Couldn't load article. Sorry!")}}function E(){$(this).find("a").each(function(t,e){var n=$(this).attr("href");n&&"/wiki"==n.substring(0,5)&&($(this).attr("href","#"),$(this).click(function(t){if($(this).attr("title")){var e=$(this).attr("title");$("#title").fadeOut({duration:"fast",start:function(){D(),F()},complete:function(){h.innerText=e,$("#title").fadeIn({complete:function(){var t=e.replace(/\s+/g,"_");p.href="https://en.wikipedia.org/wiki/"+t;var n=l+t;$.ajax({url:n,dataType:"json"}).done(W).fail(function(){P("Couldn't load article. Sorry!")})}})}})}}))}),$(this).find("style").add(".mw-empty-elt").remove(),$(this).find("*").each(function(t,e){"none"==$(this).css("display")&&$(this).remove(),$(this).removeAttr("bgcolor"),$(this).removeAttr("style")}),$(this).find("img").removeAttr("width").removeAttr("height"),$(this).add("#title").mark(r,{element:"span",className:"term"}),$(this).prepend('<div class="left-lane"></div>'),$(this).find(".infobox").add(".toc").add(".tright").add(".vertical-navbox").appendTo(".left-lane"),$("#copyright").clone().removeAttr("style").appendTo(this),$(".mw-parser-output > p:first").addClass("first-p"),H(),$("img").on("load",H),$("#resultDiv").find("*").on("load",H),T=!0,v.unshift(new Date),v.splice(-1,1),$("#resultDiv").fadeIn({duration:"fast",start:function(){H()}});var t=$(this).find("img").length;if(t){var e=0;$("img").on("load",function(n){++e==t&&N()})}}function N(){var t,e,n;if($("#resultDiv").find("img").each(function(n,i){var o=$(this).attr("src");o.includes("/thumb")&&(o=(o=o.replace(/\/thumb/g,"")).substring(0,o.lastIndexOf("/"))),o.match(/.(jpg|jpeg|png|gif)$/i)&&(t?$(this).width()>t.width()&&(t=$(this),e=o):(t=$(this),e=o))}),t){(f=$(".first-p").remove(".reference").text()).endsWith("\n")&&(f=f.substring(0,f.lastIndexOf("\n")));var i=r.charAt(0).toUpperCase()+r.slice(1);((n=new Date)-y>60*w*1e3&&new Date-v[v.length-1]<60*g*1e3?(console.log("card '"+r+"' is being printed now: "+n),y=n,1):x&&(x=!1,1))&&setTimeout(function(){!function(t,e,n){$("#cardAlert").fadeIn({duration:"fast",start:function(){z.publish("/cardInfo","https:"+t+"|"+e+"|"+n)},complete:function(){setTimeout(function(){$("#cardAlert").fadeOut("fast")},b)}})}(e,i,f)},100)}}function F(){$("#svgContainer").fadeOut("fast",function(){$(this).find("svg").empty()})}function H(){O=[];var t=$("input.search"),e=$("body"),n=t.offset().left-e.offset().left+t.width()/2,o=t.position().top-e.offset().top+t.height()/2;O.push([n,o]),$("span.term").each(function(i,r){t=$(this),n=t.offset().left-e.offset().left+t.width()/2,o=t.offset().top-e.offset().top+t.height()/2,O.push([n,o])}),d.innerHTML=i(O),$("#svgContainer").fadeIn("fast")}window.history.pushState({home:!0},""),$.fn.random=function(){return this.eq(Math.floor(Math.random()*this.length))},$("#userinput").keypress(function(t){"13"==(t.keyCode?t.keyCode:t.which)&&q()}),$("#search-button").click(q),window.onpopstate=function(t){var e,n;console.log(t),t.state&&(D(),F(),t.state.home?A():(m.value=t.state.term,e=t.state.cardTitle,n=function(){var e=l+t.state.title;$.ajax({url:e,dataType:"json"}).done(W).fail(function(){P("Couldn't load article. Sorry!")})},$("#title").fadeOut("fast",function(){I(e,n)})),o())},window.onresize=function(t){H(),o()};var z=mqtt.connect("wss://lc-sender:1c99172350e3efc0@broker.shiftr.io",{clientId:"lc-card-sender"});z.on("connect",function(){console.log("SHIFTR: client has connected!")})}]);